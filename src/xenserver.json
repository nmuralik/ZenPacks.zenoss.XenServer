{
    "id": "ZenPacks.zenoss.XenServer",
    "author": "Zenoss",
    "compat_zenoss_vers": ">=4.2",
    "install_requires": ["ZenPacks.zenoss.PythonCollector"],

    "deviceClasses": [{
        "path": "XenServer",
        "zPythonClass": "Endpoint",

        "deviceType": {
            "name": "Endpoint",

            "properties": [
                {"name": "xapi_url"},
                {"name": "xapi_username", "value": "root"},
                {"name": "xapi_password", "value": "default", "Type": "password"}
            ]
        },

        "componentTypes": [
            {
                "name": "Pool",
                "meta_type": "XenServerPool",
                "properties": [
                    {"name": "ha_allow_overcommit", "Type": "bool"},
                    {"name": "ha_enabled", "Type": "bool"},
                    {"name": "ha_host_failures_to_tolerate", "Type": "int"},
                    {"name": "ha_overcommitted", "Type": "bool"},
                    {"name": "ha_plan_exists_for", "Type": "int"},
                    {"name": "name_description"},
                    {"name": "name_label"},
                    {"name": "redo_log_enabled", "Type": "bool"},
                    {"name": "uuid"},
                    {"name": "vswitch_controller"}
                ]
            },
            {
                "name": "Host",
                "meta_type": "XenServerHost",
                "properties": [
                    {"name": "API_version_major"},
                    {"name": "API_version_minor"},
                    {"name": "API_version_vendor"},
                    {"name": "capabilities"},
                    {"name": "crashdumps"},
                    {"name": "edition"},
                    {"name": "enabled"},
                    {"name": "external_auth_service_name"},
                    {"name": "external_auth_type"},
                    {"name": "ha_network_peers"},
                    {"name": "ha_statefiles"},
                    {"name": "hostname"},
                    {"name": "memory_overhead"},
                    {"name": "name_description"},
                    {"name": "name_label"},
                    {"name": "other_config"},
                    {"name": "patches"},
                    {"name": "power_on_mode"},
                    {"name": "sched_policy"},
                    {"name": "supported_bootloaders"},
                    {"name": "suspend_image_sr"},
                    {"name": "tags"},
                    {"name": "uuid"}
                ]
            },
            {
                "name": "HostCPU",
                "meta_type": "XenServerHostCPU",
                "properties": [
                    {"name": "family"},
                    {"name": "features"},
                    {"name": "flags"},
                    {"name": "host"},
                    {"name": "model"},
                    {"name": "modelname"},
                    {"name": "number"},
                    {"name": "speed"},
                    {"name": "stepping"},
                    {"name": "utilisation"},
                    {"name": "uuid"},
                    {"name": "vendor"}
                ]
            },
            {
                "name": "PBD",
                "meta_type": "XenServerPBD",
                "properties": [
                    {"name": "current_attached", "Type": "bool"},
                    {"name": "dc_legacy_mode", "Type": "bool"},
                    {"name": "dc_location"},
                    {"name": "dc_device"},
                    {"name": "uuid"}
                ]
            },
            {
                "name": "PIF",
                "meta_type": "XenServerPIF",
                "properties": [
                    {"name": "gateway"},
                    {"name": "IP"},
                    {"name": "MAC"},
                    {"name": "netmask"},
                    {"name": "uuid"}
                ]
            },
            {
                "name": "SR",
                "meta_type": "XenServerSR",
                "properties": [
                    {"name": "name_description"},
                    {"name": "name_label"},
                    {"name": "content_type"},
                    {"name": "physical_size"},
                    {"name": "physical_utilisation"},
                    {"name": "shared"},
                    {"name": "virtual_allocation"},
                    {"name": "uuid"}
                ]
            },
            {
                "name": "VDI",
                "meta_type": "XenServerVDI",
                "properties": [
                    {"name": "allow_caching"},
                    {"name": "missing"},
                    {"name": "name_description"},
                    {"name": "name_label"},
                    {"name": "on_boot"},
                    {"name": "physical_utilisation"},
                    {"name": "read_only"},
                    {"name": "sharable"},
                    {"name": "Type"},
                    {"name": "virtual_size"},
                    {"name": "uuid"}
                ]
            },
            {
                "name": "Network",
                "meta_type": "XenServerNetwork",
                "properties": [
                    {"name": "bridge"},
                    {"name": "default_locking_mode"},
                    {"name": "MTU"},
                    {"name": "name_description"},
                    {"name": "name_label"},
                    {"name": "tags"},
                    {"name": "uuid"}
                ]
            },
            {
                "name": "VM",
                "meta_type": "XenServerVM",
                "properties": [
                    {"name": "VCPUs_max"},
                    {"name": "VCPUs_at_startup"},
                    {"name": "memory_dynamic_max"},
                    {"name": "memory_dynamic_min"},
                    {"name": "memory_overhead"},
                    {"name": "memory_static_max"},
                    {"name": "memory_static_min"},
                    {"name": "name_label"},
                    {"name": "name_description"},
                    {"name": "power_state"},
                    {"name": "uuid"}
                ]
            },
            {
                "name": "VBD",
                "meta_type": "XenServerVBD",
                "properties": [
                    {"name": "bootable"},
                    {"name": "current_attached"},
                    {"name": "empty"},
                    {"name": "status_code"},
                    {"name": "status_detail"},
                    {"name": "Type"},
                    {"name": "uuid"}
                ]
            },
            {
                "name": "VIF",
                "meta_type": "XenServerVIF",
                "properties": [
                    {"name": "MAC"},
                    {"name": "MTU"},
                    {"name": "qos_algorithm_type"},
                    {"name": "status_code"},
                    {"name": "status_detail"},
                    {"name": "uuid"}
                ]
            }
        ]
    }],

    "relationships": [
        {
            "componentA": "Host",
            "componentB": "PBD",
            "Type": "1-M",
            "Contained": true
        },
        {
            "componentA": "Host",
            "componentB": "HostCPU",
            "Type": "1-M",
            "Contained": true
        },
        {
            "componentA": "Host",
            "componentB": "PIF",
            "Type": "1-M",
            "Contained": true
        },
        {
            "componentA": "Host",
            "componentB": "VM",
            "Type": "1-M",
            "Contained": false
        },
        {
            "componentA": "SR",
            "componentB": "VDI",
            "Type": "1-M",
            "Contained": true
        },
        {
            "componentA": "SR",
            "componentB": "PBD",
            "Type": "1-M",
            "Contained": false
        },
        {
            "componentA": "Network",
            "componentB": "PIF",
            "Type": "1-M",
            "Contained": false
        },
        {
            "componentA": "Network",
            "componentB": "VIF",
            "Type": "1-M",
            "Contained": false
        },
        {
            "componentA": "VM",
            "componentB": "VBD",
            "Type": "1-M",
            "Contained": true
        },
        {
            "componentA": "VM",
            "componentB": "VIF",
            "Type": "1-M",
            "Contained": true
        },
        {
            "componentA": "VDI",
            "componentB": "VBD",
            "Type": "1-M",
            "Contained": false
        }
    ]
}
